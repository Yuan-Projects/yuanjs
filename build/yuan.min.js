!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).yuanjs={})}(this,function(e){"use strict";function v(){var r,n=Array.prototype.slice,o="pending",i={ok:[],fail:[]};function e(e,t){if("pending"!==o)throw new Error("Deferred has already been resolved");o=e,r=n.call(t,0),i[e].forEach(function(e){e.apply(e,r)})}return{resolve:function(){e("ok",arguments)},reject:function(){e("fail",arguments)},promise:function(){var n;function t(e,t){if("function"!=typeof t)throw new Error("Callback argument must be a Function");return o===e?t.apply(t,r):i[e].push(t),n}return n={done:function(e){return t("ok",e)},fail:function(e){return t("fail",e)},then:function(e,t){return this.done(e).fail(t)}}}}}function o(e){this.dataStore=Array.isArray(e)?e.filter(function(e,t,n){return n.indexOf(e)===t}):[]}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){if(!e)return"";if("string"==typeof e)return e;var t=[];for(var n in e)if(e.hasOwnProperty(n)&&"function"!=typeof e[n])if("[object Array]"!==Object.prototype.toString.call(e[n])){var r=e[n].toString();n=encodeURIComponent(n),r=encodeURIComponent(r),t.push(n+"="+r)}else for(var o=0,i=e[n].length;o<i;o++)t.push(encodeURIComponent(n)+"[]="+encodeURIComponent(e[n][o].toString()));return t.join("&")}var a,s,u,c;function n(e,t){if(p(e,t))return!1;e.className;e.classList?e.classList.add(t):e.className+=" "+t}function r(e){return!(0===e.offsetHeight&&0===e.offsetWidth)}function f(e){if(function(){var e=document.createElement("div");return e.setAttribute("style","opacity:.5"),"0.5"===e.style.opacity}())return parseFloat(e.style.opacity)||1;if(e.style.cssText){var t=e.style.cssText.match(/alpha\(.*opacity=(\d+).*\)/i);if(t&&t[1])return parseFloat(t[1]/100)}return 1}function l(e){var t={position:"absolute",visibility:"hidden",display:"block"},n={};for(var r in t)n[r]=e.style[r],e.style[r]=t[r];var o={width:e.offsetWidth,height:e.offsetHeight};for(r in t)e.style[r]=n[r];return o}function d(e,t,n){var r={float:["cssFloat","styleFloat"]};return r[t=t.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})]&&(t=void 0!==e.style[r[t][0]]?r[t][0]:r[t][1]),void 0!==n&&(e.style[t]=n),"opacity"===t?f(e):function(e,t){if(window.getComputedStyle){var n=window.getComputedStyle(e);if(n)return t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getPropertyValue(t)}else if(e.currentStyle)return t=t.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}),e.currentStyle[t]}(e,t)}function p(e,t){var n=e.className;return!!n&&(e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(n))}function t(e){var t=null;"undefined"!=typeof WebKitCSSMatrix?t=WebKitCSSMatrix:"undefined"!=typeof MSCSSMatrix?t=MSCSSMatrix:"undefined"!=typeof DOMMatrix&&(t=DOMMatrix);var n=window.getComputedStyle(e),r="";return void 0!==n.webkitTransform?r=n.webkitTransform:void 0!==n.mozTransform?r=n.mozTransform:void 0!==n.msTransform?r=n.msTransform:void 0!==n.transform&&(r=n.transform),new t(r)}function y(e,t){if(!e||!e.className)return!1;if(e.classList)e.classList.remove(t);else{var n=e.className.split(/\s+/g).filter(function(e){return e!==t}).join(" ");n!==e.className&&(e.className=n)}}function m(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}function h(e){return e&&e.nodeType}function g(e,t){if(e.matches)return e.matches(t);if(e.matchesSelector)return e.matchesSelector(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.mozMatchesSelector)return e.mozMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t);throw new Error("Not supported.")}o.prototype.add=function(e){return-1===this.dataStore.indexOf(e)&&this.dataStore.push(e),this},o.prototype.clear=function(){this.dataStore=[]},o.prototype.delete=function(e){var t=this.dataStore.indexOf(e);return-1<t&&(this.dataStore.splice(t,1),!0)},o.prototype.entries=function(){return this.dataStore.map(function(e){return[e,e]})},o.prototype.forEach=function(t,n){var r=this;this.dataStore.forEach(function(e){t.call(n,e,e,r)})},o.prototype.has=function(e){return-1<this.dataStore.indexOf(e)},o.prototype.keys=o.prototype.values=function(){return this.dataStore.slice()},o.prototype.size=function(){return this.dataStore.length},o.isSuperset=function(e,t){for(var n=t.values(),r=n.length-1;0<=r;r--)if(!e.has(n[r]))return!1;return!0},o.union=function(e,t){function n(e){r.add(e)}var r=new o;return e.forEach(n),t.forEach(n),r},o.intersection=function(e,t){var n=new o;return e.forEach(function(e){t.has(e)&&n.add(e)}),n},o.difference=function(e,t){var n=new o;return e.forEach(function(e){t.has(e)||n.add(e)}),n},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0==n)return-1;var r=0;if(1<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!=1/0&&r!=-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),n<=r)return-1;for(var o=0<=r?r:Math.max(n-Math.abs(r),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null===this)throw new TypeError("this is null or not defined");var o,i=Object(this),a=i.length>>>0;if("[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(2<=arguments.length&&(n=t),r=0;r<a;)r in i&&(o=i[r],e.call(n,o,r,i)),r++}),Object.keys||(Object.keys=(a=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable("toString"),c=(u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!==i(e)&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)a.call(e,t)&&r.push(t);if(s)for(n=0;n<c;n++)a.call(e,u[n])&&r.push(u[n]);return r}));function b(e,t){var n=function(){return!1};return"string"==typeof t?n=function(e){return g(e,t)}:"function"==typeof t&&(n=t),Array.prototype.filter.call(e,n)}function S(e,t){return e.querySelectorAll(t)}var E={};function T(e){function t(){return!0}function n(){return!1}if(!e||!e.stopPropagation){var r=e||window.event;for(var o in e={},r)e[o]=r[o];if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){e.returnValue=!1,e.isDefaultPrevented=t},e.isDefaultPrevented=n,e.stopPropagation=function(){e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=t,this.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX){var i=document.documentElement,a=document.body;e.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var x=1;function C(e,t){function n(e){for(var t in e)return!1;return!0}var r=yuanjs.getData(e);0===r.handlers[t].length&&(delete r.handlers[t],document.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):document.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),n(r.handlers)&&(delete r.handlers,delete r.dispatchers),n(r)&&yuanjs.removeData(e)}var O,j,N,L=(N=j=!(O=[]),function(e,t){j?setTimeout(function(){e(t)},1):(O.push({fn:e,ctx:t}),"complete"===document.readyState?setTimeout(M,1):N||(document.addEventListener?(document.addEventListener("DOMContentLoaded",M,!1),window.addEventListener("load",M,!1)):(document.attachEvent("onreadystatechange",P),window.attachEvent("onload",M)),N=!0))});function M(){if(!j){j=!0;for(var e=0;e<O.length;e++)O[e].fn.call(window,O[e].ctx);O=[]}}function P(){"complete"===document.readyState&&M()}e.Deferred=v,e.Set=o,e.addClass=n,e.addEvent=function(r,e,t){var o=yuanjs.getData(r);o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=x++),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e){if(!o.disabled){e=T(e);var t=o.handlers[e.type];if(t)for(var n=0;n<t.length;n++)t[n].call(r,e)}}),1==o.handlers[e].length&&(document.addEventListener?r.addEventListener(e,o.dispatcher,!1):document.attachEvent&&r.attachEvent("on"+e,o.dispatcher))},e.after=function(e,t){var n=null;if("string"==typeof t?n=m(t):h(t)&&(n=t),!n)return!1;e.parentNode.insertBefore(n,e.nextSibling)},e.ajax=function(e){var i=v(),a=function(e){var t=new XMLHttpRequest;e&&"undefined"!=typeof XDomainRequest&&(t=new XDomainRequest);return t}(e.crossDomain),t=e.url,n=e.type?e.type.toUpperCase():"GET",r=!!e.asyc||!0,s=e.success,u=e.error,c=e.complete,o=e.data?w(e.data):"",f=e.dataType||"text",l=e.contentType||"application/x-www-form-urlencoded",d=e.timeout&&!isNaN(e.timeout)&&0<e.timeout?e.timeout:0,p=!1,y="[object Object]"===Object.prototype.toString.call(e.headers)?e.headers:null;if(d)var m=setTimeout(function(){p=!0,a.abort(),a.message="Canceled",i.reject(a)},d);if("GET"===n&&""!==o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),a.open(n,t,r),r&&("onreadystatechange"in a?a.onreadystatechange=function(){4===a.readyState&&g()}:(a.onload=g,a.onerror=function(){u&&u(a),i.reject(a)})),a.setRequestHeader&&a.setRequestHeader("Content-Type",l),y&&a.setRequestHeader)for(var h in y)y.hasOwnProperty(h)&&a.setRequestHeader(h,y[h]);switch(n){case"POST":a.send(o);break;case"GET":a.send(null)}function g(){if(!p){clearTimeout(m);var e=a.responseText,t=a.responseXML,n=a.statusText;if(c&&c(a,n),"status"in a){var r=a.status;if(200<=r&&r<300||304===r){var o=a.getResponseHeader("Content-Type");"xml"===f||o&&-1!==o.indexOf("xml")&&a.responseXML?s&&s(t,a):"json"===f||"application/json"===o?s&&s(JSON.parse(e),a):s&&s(e,a),i.resolve(a)}else u&&u(r,a),i.reject(a)}else"xml"===f||a.responseXML?s&&s(t,a):"json"===f?s&&s(JSON.parse(e),a):s&&s(e,a),i.resolve(a)}}return r||g(),i.promise()},e.append=function(e,t){var n=null;if("string"==typeof t?n=m(t):h(t)&&(n=t),!n)return!1;e.appendChild(n)},e.before=function(e,t){var n=null;if("string"==typeof t?n=m(t):h(t)&&(n=t),!n)return!1;e.parentNode.insertBefore(n,e)},e.bind=function(t,n){var r=Array.prototype.slice;if(Function.prototype.bind)return Function.prototype.bind.apply(t,Array.prototype.slice.call(arguments,1));var o=r.call(arguments,2);return function(){var e=r.call(arguments);return t.apply(n,o.concat(e))}},e.children=function(e){return e.children},e.clone=function(e){return e.cloneNode(!0)},e.contains=function(e,t){if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));if("function"==typeof e.contains)return e.contains(t);if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},e.createClass=function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({key:n,value:e[n]});return t}return t&&(t=o(t),r(e.prototype,t)),n&&r(e,n=o(n)),e},e.css=d,e.cssClass=function(e,t){if(t=t||document,document.getElementsByClassName)return t.getElementsByClassName(e);var n=e.replace(/^\s+|\s+$/g,"").split(/\s+/);if(document.querySelectorAll)return e="."+n.join("."),t.querySelectorAll(e);var r=t.getElementsByTagName("*"),o=[];if(r.length)e:for(var i=0;i<r.length;i++){var a=r[i],s=a.className;if(s)if(s!==e){for(var u=0;u<n.length;u++){if(!new RegExp("\\b"+n[u]+"\\b").test(s))continue e}o.push(a)}else o.push(a)}return o},e.documentReady=L,e.empty=function(e){e.innerHTML=""},e.encodeFormatData=w,e.filter=b,e.find=S,e.getOffset=function(e){for(var t=e.offsetParent,n=e.offsetLeft,r=e.offsetTop;t=t.offsetParent;)n+=t.offsetLeft,r+=t.offsetTop;return{left:n,top:r}},e.getTransitionEndEventName=function(){var e,t=document.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e];return""},e.getTranslateXValue=function(e){return t(e).m41},e.getTranslateYValue=function(e){return t(e).m42},e.has3dTransforms=function(){var e,t=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in document.body.insertBefore(t,null),n)void 0!==t.style[r]&&(t.style[r]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(n[r]));return document.body.removeChild(t),void 0!==e&&0<e.length&&"none"!==e},e.hasClass=p,e.height=function(e,t){if(t)e.style.height=t;else{if(!r(e))return l(e).height;if(window.getComputedStyle)return window.getComputedStyle(e).getPropertyValue("height");if(e.currentStyle){var n=e.currentStyle.height;return"auto"==n?e.offsetHeight:n}}},e.html=function(e,t){return t&&(e.innerHTML=t),e.innerHTML},e.id=function(){var e=arguments.length;if(0===e)throw Error("No id name provided.");for(var t=[],n=0;n<e;n++){var r=arguments[n];t.push("string"==typeof r?document.getElementById(r):r)}return 1<e?t:t[0]},e.inArray=function(e,t,n){return Array.prototype.indexOf.call(t,e,n)},e.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},e.isEmpty=function(e){return/^\s*$/.test(e)},e.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},e.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.isInteger=function(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.isNumber=function(e){return!isNaN(e)},e.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e.isString=function(e){return"string"==typeof e},e.isUndefined=function(e){return void 0===e},e.loadScript=function(e,t,n){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.charset="UTF-8",o.onload=o.onreadystatechange=function(){var e=o.readyState;e&&!/loaded|complete/.test(e)||(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),o=null,t())},"onerror"in o&&(o.onerror=function(){n()}),r.insertBefore(o,r.firstChild)},e.matchesSelector=g,e.off=function(e,t){if(E[e])if(t){var n=E[e].indexOf(t);-1!==n&&E[e].splice(n,1)}else E[e]=[]},e.offset=function(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,o=window.pageYOffset||r.scrollTop||n.scrollTop,i=window.pageXOffset||r.scrollLeft||n.scrollLeft,a=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,u=t.top+o-a,c=t.left+i-s;return{top:Math.round(u),left:Math.round(c)}},e.offsetParent=function(e){for(var t=e.offsetParent;t&&"static"===d(t,"position");)t=t.offsetParent;return t||document.body},e.on=function(e,t){return E[e]||(E[e]=[]),E[e].push(t),t},e.parent=function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},e.position=function(e){return{left:e.offsetLeft,top:e.offsetTop}},e.prepend=function(e,t){var n=null;if("string"==typeof t?n=m(t):h(t)&&(n=t),!n)return!1;e.insertBefore(n,e.firstChild)},e.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.removeClass=y,e.removeEvent=function(t,e,n){var r=yuanjs.getData(t);if(r.handlers){var o=function(e){r.handlers[e]=[],C(t,e)};if(e){var i=r.handlers[e];if(i)if(n){if(n.guid)for(var a=0;a<i.length;a++)i[a].guid==n.guid&&i.splice(a--,1);C(t,e)}else o(e)}else for(var s in r.handlers)o(s)}},e.replaceAll=function(e,t){var n=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(n,function(e){return t[e.toLowerCase()]})},e.siblings=function(e){for(var t=[],n=e.parentNode.firstChild;n;)1===n.nodeType&&n!==e&&t.push(n),n=n.nextSibling;return t},e.tag=function(e){var t,n;window.findByTagWorksAsExpected||(window.findByTagWorksAsExpected=((n=document.createElement("div")).appendChild(document.createComment("test")),0===n.getElementsByTagName("*").length));var r=document.getElementsByTagName(e);if("*"===e&&!window.findByTagWorksAsExpected){t=[];for(var o=r.length-1;0<=o;o--)1==r[o].nodeType&&t.push(r[o])}return t||r},e.text=function(e,t){if(void 0===t)return"string"==typeof e.textContent?e.textContent:e.innerText;"string"==typeof t&&("string"==typeof e.textContent?e.textContent=t:e.innerText=t)},e.toggleClass=function(e,t){p(e,t)?y(e,t):n(e,t)},e.trigger=function(e){if(E[e])for(var t=Array.prototype.slice.call(arguments,1),n=E[e],r=0,o=n.length;r<o;r++)n[r].apply(n[r],t)},e.triggerEvent=function e(t,n){var r=yuanjs.getData(t),o=t.parentNode||t.ownerDocument;if("string"==typeof n&&(n={type:n,target:t}),n=T(n),r.dispatcher&&r.dispatcher.call(t,n),o&&!n.isPropagationStopped())e(o,n);else if(!o&&!n.isDefaultPrevented()){var i=yuanjs.getData(n.target);n.target[n.type]&&(i.disabled=!0,n.target[n.type](),i.disabled=!1)}},e.trim=function(e){return String.prototype.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},e.urlArgs=function(e){for(var t={},n=function(e){return decodeURIComponent(e.replace(/\+/g," "))},r=(e=e||location.search).substring(1).split("&"),o=0;o<r.length;o++){var i=r[o].indexOf("=");if(-1!=i){var a=r[o].substring(0,i),s=r[o].substring(i+1);a=n(a),s=n(s),t[a]=s}}return t},e.version="0.1.0",e.width=function(e,t){if(t)e.style.width=t;else{if(e===window)return function(){var e=window.innerWidth,t=window.innerHeight;return"number"!=typeof e&&(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight),{width:e,height:t}}().width;if(!r(e))return l(e).width;if(window.getComputedStyle)return window.getComputedStyle(e).getPropertyValue("width");if(e.currentStyle){var n=e.currentStyle.width;return"auto"==n?e.offsetWidth:n}}},Object.defineProperty(e,"__esModule",{value:!0})});
