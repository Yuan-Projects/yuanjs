/*! YuanJS 2014-08-25 */
!function(a,b){"use strict";function c(){function a(a,f){if("pending"!==d)throw new Error("Deferred has already been resolved");d=a,b=c.call(f,0),e[a].forEach(function(a){a.apply(a,b)})}var b,c=Array.prototype.slice,d="pending",e={ok:[],fail:[]};return{resolve:function(){a("ok",arguments)},reject:function(){a("fail",arguments)},promise:function(){function a(a,f){if("function"!=typeof f)throw new Error("Callback argument must be a Function");return d===a?f.apply(f,b):e[a].push(f),c}var c;return c={done:function(b){return a("ok",b)},fail:function(b){return a("fail",b)},then:function(a,b){return this.done(a).fail(b)}}}}}function d(a){if(!a)return"";if("string"==typeof a)return a;var b=[];for(var c in a)if(a.hasOwnProperty(c)&&"function"!=typeof a[c]){var d=a[c].toString();c=encodeURIComponent(c.replace(" ","+")),d=encodeURIComponent(d.replace(" ","+")),b.push(c+"="+d)}return b.join("&")}function e(a){return!isNaN(a)}function f(a){return"string"==typeof a}function g(){return"[object Function]"===Object.prototype.toString.call(x)}function h(a){return null===a}function i(a){return"undefined"==typeof a}function j(a){return/^\s*$/.test(a)}function k(a){function b(){if(!q){clearTimeout(r);var a=f.responseText,b=f.responseXML,c=f.statusText;if(l&&l(f,c),200===f.status){var d=f.getResponseHeader("Content-Type");"xml"===n||d&&-1!==d.indexOf("xml")&&f.responseXML?j&&j(b,f):"json"===n||"application/json"===d?j&&j(JSON.parse(a),f):j&&j(a,f),e.resolve(f)}else k&&k(f.status,f),e.reject(f)}}var e=c(),f=new XMLHttpRequest,g=a.url,h=a.type?a.type.toUpperCase():"GET",i=!!a.asyc||!0,j=a.success,k=a.error,l=a.complete,m=a.data?d(a.data):"",n=a.dataType||"text",o=a.contentType||"application/x-www-form-urlencoded",p=a.timeout&&!isNaN(a.timeout)&&a.timeout>0?a.timeout:0,q=!1;if(p)var r=setTimeout(function(){q=!0,f.abort(),f.message="Canceled",e.reject(f)},p);switch("GET"===h&&""!==m&&(g+="?"+m),f.open(h,g,i),i&&(f.onreadystatechange=function(){4===f.readyState&&b()}),f.setRequestHeader("Content-Type",o),h){case"POST":f.send(m);break;case"GET":f.send(null)}return i||b(),e.promise()}function l(){var a=arguments.length;if(0===a)throw Error("No id name provided.");for(var b=[],c=0;a>c;c++){var d=arguments[c];b.push("string"==typeof d?document.getElementById(d):d)}return a>1?b:b[0]}function m(b){var c;a.findByTagWorksAsExpected||(a.findByTagWorksAsExpected=function(){var a=document.createElement("div");return a.appendChild(document.createComment("test")),0===a.getElementsByTagName("*").length}());var d=document.getElementsByTagName(b);if("*"===b&&!a.findByTagWorksAsExpected){c=[];for(var e=d.length-1;e>=0;e--)1==d[e].nodeType&&c.push(d[e])}return c?c:d}function n(a,b){if(b=b||document,document.getElementsByClassName)return b.getElementsByClassName(a);var c=a.replace(/^\s+|\s+$/g,"").split(/\s+/);if(document.querySelectorAll)return a="."+c.join("."),b.querySelectorAll(a);var d=b.getElementsByTagName("*"),e=[];if(d.length)a:for(var f=0;f<d.length;f++){var g=d[f],h=g.className;if(h)if(h!==a){for(var i=0;i<c.length;i++){var j=new RegExp("\\b"+c[i]+"\\b");if(!j.test(h))continue a}e.push(g)}else e.push(g)}return e}function o(a,b){return u[a]||(u[a]=[]),u[a].push(b),b}function p(a,b){if(u[a])if(b){var c=u[a].indexOf(b);-1!==c&&u[a].splice(c,1)}else u[a]=[]}function q(a){if(u[a])for(var b=Array.prototype.slice.call(arguments,1),c=u[a],d=c.length-1;d>=0;d--)c[d].apply(c[d],b)}function r(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function s(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}var t={};a.console||(a.console={log:function(){var a=Array.prototype.slice.call(arguments),b=a.join("\n");alert(b)}}),t.console=a.console,t.Deferred=c,a.XMLHttpRequest===b&&(a.XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){throw new Error("XMLHttpRequest is not supported")}}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError("this is null or not defined");var e,f=Object(this),g=f.length>>>0;if("[object Function]"!=={}.toString.call(a))throw new TypeError(a+" is not a function");for(arguments.length>=2&&(c=b),d=0;g>d;)d in f&&(e=f[d],a.call(c,e,d,f)),d++}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),t.isNumber=e,t.isString=f,t.isFunction=g,t.isNull=h,t.isUndefined=i,t.isEmpty=j,t.ajax=k,t.id=l,t.tag=m,t.cssClass=n;var u=[];t.on=o,t.off=p,t.trigger=q,t.addEventListener=r,t.removeEventListener=s,"undefined"!=typeof module&&module.exports?module.exports=t:a.yuanjs=t}(window,void 0);