(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.yuanjs = {}));
})(this, (function (exports) { 'use strict';

  function Deferred(){var n,r=Array.prototype.slice,e="pending",t={ok:[],fail:[]};function o(o,f){if("pending"!==e)throw new Error("Deferred has already been resolved");e=o,n=r.call(f,0),t[o].forEach((function(r){r.apply(r,n);}));}return {resolve:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];o("ok",arguments);},reject:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];o("fail",arguments);},promise:function(){var r;function o(o,f){if("function"!=typeof f)throw new Error("Callback argument must be a Function");return e===o?f.apply(f,n):t[o].push(f),r}return r={done:function(n){return o("ok",n)},fail:function(n){return o("fail",n)},then:function(n,r){return this.done(n).fail(r)}}}}}

  function YuanSet(t){this.dataStore=Array.isArray(t)?t.filter((function(t,e,n){return n.indexOf(t)===e})):[];}YuanSet.prototype.add=function(t){return -1===this.dataStore.indexOf(t)&&this.dataStore.push(t),this},YuanSet.prototype.clear=function(){this.dataStore=[];},YuanSet.prototype.delete=function(t){var e=this.dataStore.indexOf(t);return e>-1&&(this.dataStore.splice(e,1),!0)},YuanSet.prototype.entries=function(){return this.dataStore.map((function(t){return [t,t]}))},YuanSet.prototype.forEach=function(t,e){var n=this;this.dataStore.forEach((function(r){t.call(e,r,r,n);}));},YuanSet.prototype.has=function(t){return this.dataStore.indexOf(t)>-1},YuanSet.prototype.values=function(){return this.dataStore.slice()},YuanSet.prototype.keys=YuanSet.prototype.values,YuanSet.prototype.size=function(){return this.dataStore.length},YuanSet.isSuperset=function(t,e){for(var n=e.values(),r=n.length-1;r>=0;r--)if(!t.has(n[r]))return !1;return !0},YuanSet.union=function(t,e){var n=new YuanSet,r=function(t){n.add(t);};return t.forEach(r),e.forEach(r),n},YuanSet.intersection=function(t,e){var n=new YuanSet;return t.forEach((function(t){e.has(t)&&n.add(t);})),n},YuanSet.difference=function(t,e){var n=new YuanSet;return t.forEach((function(t){e.has(t)||n.add(t);})),n};

  function encodeFormatData(r){if(!r)return "";if("string"==typeof r)return r;var t=[];for(var e in r)if(r.hasOwnProperty(e)&&"function"!=typeof r[e])if("[object Array]"!==Object.prototype.toString.call(r[e])){var n=r[e].toString();e=encodeURIComponent(e),n=encodeURIComponent(n),t.push(e+"="+n);}else for(var o=0,i=r[e].length;o<i;o++)t.push(encodeURIComponent(e)+"[]="+encodeURIComponent(r[e][o].toString()));return t.join("&")}function trim(r){return String.prototype.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function isArray(r){return Array.isArray?Array.isArray(r):"[object Array]"===Object.prototype.toString.call(r)}function inArray(r,t,e){return Array.prototype.indexOf.call(t,r,e)}function isEmptyObject(r){var t;for(t in r)return !1;return !0}function isNumber(r){return !isNaN(r)}function isString(r){return "string"==typeof r}function isFunction(r){return "[object Function]"===Object.prototype.toString.call(r)}function isNumeric(r){return !isNaN(parseFloat(r))&&isFinite(r)}function isUndefined(r){return void 0===r}function isEmpty(r){return /^\s*$/.test(r)}function replaceAll(r,t){var e=new RegExp(Object.keys(t).join("|"),"gi");return r.replace(e,(function(r){return t[r.toLowerCase()]}))}function urlArgs(r){for(var t={},e=function(r){return decodeURIComponent(r.replace(/\+/g," "))},n=(r=r||location.search).substring(1).split("&"),o=0;o<n.length;o++){var i=n[o].indexOf("=");if(-1!=i){var u=n[o].substring(0,i),c=n[o].substring(i+1);u=e(u),c=e(c),t[u]=c;}}return t}function isInteger(r){return Number.isInteger?Number.isInteger(r):"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}function createClass(r,t,e){function n(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n);}}function o(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push({key:e,value:r[e]});return t}if(t){var i=o(t);n(r.prototype,i);}e&&n(r,i=o(e));return r}Object.keys||(Object.keys=function(){var r=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=e.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,u,c=[];for(i in o)r.call(o,i)&&c.push(i);if(t)for(u=0;u<n;u++)r.call(o,e[u])&&c.push(e[u]);return c}}());

  function ajax(e){var t=Deferred(),r=function(){var e=new XMLHttpRequest;return e}(),a=e.url,o=e.type?e.type.toUpperCase():"GET",n=!!e.asyc||!0,s=e.success,c=e.error,d=e.complete,i=e.data?encodeFormatData(e.data):"",p=e.dataType||"text",l=e.contentType||"application/x-www-form-urlencoded",u=e.timeout&&!isNaN(e.timeout)&&e.timeout>0?e.timeout:0,m=!1,f="[object Object]"===Object.prototype.toString.call(e.headers)?e.headers:null;if(u)var y=setTimeout((function(){m=!0,r.abort(),r.message="Canceled",t.reject(r);}),u);if("GET"===o&&""!==i&&(a+=(-1===a.indexOf("?")?"?":"&")+i),r.open(o,a,n),n&&("onreadystatechange"in r?r.onreadystatechange=function(){4===r.readyState&&T();}:(r.onload=T,r.onerror=function(){c&&c("error",r),t.reject(r);})),r.setRequestHeader&&r.setRequestHeader("Content-Type",l),f&&r.setRequestHeader)for(var h in f)f.hasOwnProperty(h)&&r.setRequestHeader(h,f[h]);switch(o){case"POST":r.send(i);break;case"GET":r.send(null);}function T(){if(!m){clearTimeout(y);var e=r.responseText,a=r.responseXML,o=r.statusText;if(d&&d(r,o),"status"in r){var n=r.status;if(n>=200&&n<300||304===n){var i=r.getResponseHeader("Content-Type");"xml"===p||i&&-1!==i.indexOf("xml")&&r.responseXML?s&&s(a,r):"json"===p||"application/json"===i?s&&s(JSON.parse(e),r):s&&s(e,r),t.resolve(r);}else c&&c(n,r),t.reject(r);}else "xml"===p||r.responseXML?s&&s(a,r):"json"===p?s&&s(JSON.parse(e),r):s&&s(e,r),t.resolve(r);}}return n||T(),t.promise()}function loadScript(e,t,r){var a=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.charset="UTF-8",o.onload=o.onreadystatechange=function(){var e=o.readyState;e&&!/loaded|complete/.test(e)||(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),o=null,t());},"onerror"in o&&(o.onerror=function(){r();}),a.insertBefore(o,a.firstChild);}

  function addClass(t,e){if(hasClass(t,e))return !1;t.classList?t.classList.add(e):t.className+=" "+e;}function isVisible(t){return !(0===t.offsetHeight&&0===t.offsetWidth)}function isOpacitySupported(){var t=document.createElement("div");return t.setAttribute("style","opacity:.5"),"0.5"===t.style.opacity}function getOpacity(t){if(isOpacitySupported())return parseFloat(t.style.opacity)||1;if(t.style.cssText){var e=t.style.cssText.match(/alpha\(.*opacity=(\d+).*\)/i);if(e&&e[1])return parseFloat(e[1])/100}return 1}function getDimensions(t){var e={position:"absolute",visibility:"hidden",display:"block"},n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t.style[i],t.style[i]=e[i]);var o={width:t.offsetWidth,height:t.offsetHeight};for(i in e)e.hasOwnProperty(i)&&(t.style[i]=n[i]);return o}function css(t,e,n){var i={float:["cssFloat","styleFloat"]};if(e=e.replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()})),i.hasOwnProperty(e)){var o=i[e],r=o[0];e=void 0!==t.style[r]?o[0]:o[1];}return void 0!==n&&(t.style[e]=n),"opacity"===e?getOpacity(t):fetchComputedStyle(t,e)}function fetchComputedStyle(t,e){if(window.getComputedStyle){var n=window.getComputedStyle(t);if(n)return e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getPropertyValue(e)}}function hasClass(t,e){var n=t.className;return !!n&&(t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(n))}function getWindowSize(){var t=window.innerWidth,e=window.innerHeight;return "number"!=typeof t&&(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight),{width:t,height:e}}function width(t,e){if(e&&"style"in t)t.style.width=e;else {if(t===window)return getWindowSize().width;if(!isVisible(t))return getDimensions(t).width;if(window.getComputedStyle)return window.getComputedStyle(t).getPropertyValue("width")}}function height(t,e){if(e)t.style.height=e;else {if(!isVisible(t))return getDimensions(t).height;if(window.getComputedStyle)return window.getComputedStyle(t).getPropertyValue("height")}}function position(t){return {left:t.offsetLeft,top:t.offsetTop}}function offset(t){var e=t.getBoundingClientRect(),n=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||n.scrollTop,r=window.pageXOffset||i.scrollLeft||n.scrollLeft,s=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,f=e.top+o-s,l=e.left+r-a;return {top:Math.round(f),left:Math.round(l)}}function getOffset(t){for(var e=t.offsetParent,n=t.offsetLeft,i=t.offsetTop;e.offsetParent;)n+=(e=e.offsetParent).offsetLeft,i+=e.offsetTop;return {left:n,top:i}}function getTranslateXValue(t){return getTranslateValue(t).m41}function getTranslateYValue(t){return getTranslateValue(t).m42}function getTranslateValue(t){var e=null;"undefined"!=typeof WebKitCSSMatrix?e=WebKitCSSMatrix:"undefined"!=typeof MSCSSMatrix?e=MSCSSMatrix:"undefined"!=typeof DOMMatrix&&(e=DOMMatrix);var n=window.getComputedStyle(t),i="";return void 0!==n.webkitTransform?i=n.webkitTransform:"mozTransform"in n?i=n.mozTransform:"msTransform"in n?i=n.msTransform:void 0!==n.transform&&(i=n.transform),new e(i)}function getTransitionEndEventName(){var t,e=document.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend"};for(t in n)if(n.hasOwnProperty(t)&&void 0!==e.style[t])return n[t];return ""}function has3dTransforms(){var t,e=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var i in document.body.insertBefore(e,null),n)n.hasOwnProperty(i)&&void 0!==e.style[i]&&(e.style[i]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(n[i]));return document.body.removeChild(e),void 0!==t&&t.length>0&&"none"!==t}function removeClass(t,e){if(!t||!t.className)return !1;if(t.classList)t.classList.remove(e);else {var n=t.className.split(/\s+/g).filter((function(t){return t!==e})).join(" ");n!==t.className&&(t.className=n);}}function toggleClass(t,e){hasClass(t,e)?removeClass(t,e):addClass(t,e);}

  function createDOMFromString(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}function isDOMNode(e){return e&&e.nodeType}function after(e,t){var n=null;"string"==typeof t?n=createDOMFromString(t):isDOMNode(t)&&(n=t),n&&e.parentNode.insertBefore(n,e.nextSibling);}function append(e,t){var n=null;"string"==typeof t?n=createDOMFromString(t):isDOMNode(t)&&(n=t),n&&e.appendChild(n);}function before(e,t){var n=null;"string"==typeof t?n=createDOMFromString(t):isDOMNode(t)&&(n=t),n&&e.parentNode.insertBefore(n,e);}function children(e){return e.children}function clone(e){return e.cloneNode(!0)}function html(e,t){return t&&(e.innerHTML=t),e.innerHTML}function id(){var e=arguments.length;if(0===e)throw Error("No id name provided.");for(var t=[],n=0;n<e;n++){var r=arguments[n];t.push("string"==typeof r?document.getElementById(r):r);}return e>1?t:t[0]}function tag(e){var t,n=document.getElementsByTagName(e);if("*"===e){t=[];for(var r=n.length-1;r>=0;r--)1==n[r].nodeType&&t.push(n[r]);}return t||n}function cssClass(e,t){if(t=t||document,document.getElementsByClassName)return t.getElementsByClassName(e);var n=e.replace(/^\s+|\s+$/g,"").split(/\s+/);if(document.querySelectorAll)return e="."+n.join("."),t.querySelectorAll(e);var r=t.getElementsByTagName("*"),o=[];if(r.length)e:for(var i=0;i<r.length;i++){var c=r[i],f=c.className;if(f)if(f!==e){for(var s=0;s<n.length;s++){if(!new RegExp("\\b"+n[s]+"\\b").test(f))continue e}o.push(c);}else o.push(c);}return o}function empty(e){e.innerHTML="";}function filterNode(e,t){var n=function(){return !1};return "string"==typeof t?n=function(e){return matchesSelector(e,t)}:"function"==typeof t&&(n=t),Array.prototype.filter.call(e,n)}function findNode(e,t){return e.querySelectorAll(t)}function matchesSelector(e,t){if(e.matches)return e.matches(t);if(e.matchesSelector)return e.matchesSelector(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.mozMatchesSelector)return e.mozMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t);throw new Error("Not supported.")}function contains(e,t){if(e.compareDocumentPosition)return !!(16&e.compareDocumentPosition(t));if("function"==typeof e.contains)return e.contains(t);if(t)for(;t=t.parentNode;)if(t===e)return !0;return !1}function offsetParent(e){for(var t=e.offsetParent;t&&"static"===css(t,"position");)t=t.offsetParent;return t||document.body}function parent(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null}function prepend(e,t){var n=null;"string"==typeof t?n=createDOMFromString(t):isDOMNode(t)&&(n=t),n&&e.insertBefore(n,e.firstChild);}function remove(e){e.parentNode&&e.parentNode.removeChild(e);}function siblings(e){for(var t=[],n=e.parentNode.firstChild;n;)1===n.nodeType&&n!==e&&t.push(n),n=n.nextSibling;return t}function text(e,t){if(void 0===t)return "string"==typeof e.textContent?e.textContent:e.innerText;"string"==typeof t&&("string"==typeof e.textContent?e.textContent=t:e.innerText=t);}var filter=filterNode,find=findNode;

  var Events={};function on(e,n){return Events[e]||(Events[e]=[]),Events[e].push(n),n}function off(e,n){if(Events[e])if(n){var t=Events[e].indexOf(n);-1!==t&&Events[e].splice(t,1);}else Events[e]=[];}function trigger(e){if(Events[e])for(var n=Array.prototype.slice.call(arguments,1),t=Events[e],r=0,s=t.length;r<s;r++)t[r].apply(t[r],n);}

  function bind(r,n){var t=Array.prototype.slice,a=t.call(arguments,2);return function(){var c=t.call(arguments);return r.apply(n,a.concat(c))}}

  var cache={},guidCounter=1,expando="data"+(new Date).getTime();function getData(e){var a=e[expando];return a||(a=e[expando]=guidCounter++,cache[a]={}),cache[a]}function removeData(e){var a=e[expando];if(a){delete cache[a];try{delete e[expando];}catch(a){e.removeAttribute&&e.removeAttribute(expando);}}}

  function fixEvent(e){function t(){return !0}function n(){return !1}if(!e||!e.stopPropagation){var a=e||window.event;for(var r in e={},a)e[r]=a[r];if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){e.returnValue=!1,e.isDefaultPrevented=t;},e.isDefaultPrevented=n,e.stopPropagation=function(){e.cancelBubble=!0,e.isPropagationStopped=t;},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=t,this.stopPropagation();},e.isImmediatePropagationStopped=n,null!==e.clientX){var i=document.documentElement,o=document.body;e.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0);}e.which=e.charCode||e.keyCode,null!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0);}return e}var nextGuid=1;function addEvent(e,t,n){var a=getData(e);a.handlers||(a.handlers={}),a.handlers[t]||(a.handlers[t]=[]),n.guid||(n.guid=nextGuid++),a.handlers[t].push(n),a.dispatcher||(a.disabled=!1,a.dispatcher=function(t){if(!a.disabled){t=fixEvent(t);var n=a.handlers[t.type];if(n)for(var r=0;r<n.length;r++)n[r].call(e,t);}}),1==a.handlers[t].length&&document.addEventListener&&e.addEventListener(t,a.dispatcher,!1);}function removeEvent(e,t,n){var a=getData(e);if(a.handlers){var r=function(t){a.handlers[t]=[],tidyUp(e,t);};if(t){var i=a.handlers[t];if(i)if(n){if(n.guid)for(var o=0;o<i.length;o++)i[o].guid==n.guid&&i.splice(o--,1);tidyUp(e,t);}else r(t);}else for(var d in a.handlers)r(d);}}function triggerEvent(e,t){var n=getData(e),a=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=fixEvent(t),n.dispatcher&&n.dispatcher.call(e,t),a&&!t.isPropagationStopped())triggerEvent(a,t);else if(!a&&!t.isDefaultPrevented()){var r=getData(t.target);t.target[t.type]&&(r.disabled=!0,t.target[t.type](),r.disabled=!1);}}function tidyUp(e,t){function n(e){for(var t in e)return !1;return !0}var a=getData(e);0===a.handlers[t].length&&(delete a.handlers[t],document.removeEventListener&&e.removeEventListener(t,a.dispatcher,!1)),n(a.handlers)&&(delete a.handlers,delete a.dispatchers),n(a)&&removeData(e);}var documentReady=function(){var e=[],t=!1,n=!1;function a(){if(!t){t=!0;for(var n=0;n<e.length;n++)e[n].fn.call(window,e[n].ctx);e=[];}}return function(r,i){t?setTimeout((function(){r(i);}),1):(e.push({fn:r,ctx:i}),"complete"===document.readyState?setTimeout(a,1):n||(document.addEventListener&&(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)),n=!0));}}();

  var version="0.1.0";

  exports.Deferred = Deferred;
  exports.Set = YuanSet;
  exports.addClass = addClass;
  exports.addEvent = addEvent;
  exports.after = after;
  exports.ajax = ajax;
  exports.append = append;
  exports.before = before;
  exports.bind = bind;
  exports.children = children;
  exports.clone = clone;
  exports.contains = contains;
  exports.createClass = createClass;
  exports.css = css;
  exports.cssClass = cssClass;
  exports.documentReady = documentReady;
  exports.empty = empty;
  exports.encodeFormatData = encodeFormatData;
  exports.filter = filter;
  exports.find = find;
  exports.getOffset = getOffset;
  exports.getTransitionEndEventName = getTransitionEndEventName;
  exports.getTranslateXValue = getTranslateXValue;
  exports.getTranslateYValue = getTranslateYValue;
  exports.has3dTransforms = has3dTransforms;
  exports.hasClass = hasClass;
  exports.height = height;
  exports.html = html;
  exports.id = id;
  exports.inArray = inArray;
  exports.isArray = isArray;
  exports.isEmpty = isEmpty;
  exports.isEmptyObject = isEmptyObject;
  exports.isFunction = isFunction;
  exports.isInteger = isInteger;
  exports.isNumber = isNumber;
  exports.isNumeric = isNumeric;
  exports.isString = isString;
  exports.isUndefined = isUndefined;
  exports.loadScript = loadScript;
  exports.matchesSelector = matchesSelector;
  exports.off = off;
  exports.offset = offset;
  exports.offsetParent = offsetParent;
  exports.on = on;
  exports.parent = parent;
  exports.position = position;
  exports.prepend = prepend;
  exports.remove = remove;
  exports.removeClass = removeClass;
  exports.removeEvent = removeEvent;
  exports.replaceAll = replaceAll;
  exports.siblings = siblings;
  exports.tag = tag;
  exports.text = text;
  exports.toggleClass = toggleClass;
  exports.trigger = trigger;
  exports.triggerEvent = triggerEvent;
  exports.trim = trim;
  exports.urlArgs = urlArgs;
  exports.version = version;
  exports.width = width;

}));
